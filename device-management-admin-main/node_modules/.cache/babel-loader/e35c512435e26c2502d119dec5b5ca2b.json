{"ast":null,"code":"var _jsxFileName = \"D:\\\\Canh Long\\\\Documents\\\\Nam4_Ky 2\\\\Chuy\\xEAn \\u0110\\u1EC1 M\\u1EA1ng\\\\Web\\\\device-management-admin-main\\\\src\\\\pages\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport { Table, Image, Button, Modal, Typography, notification, Alert } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { deleteProduct } from \"../api/product\";\nimport { EditOutlined, DeleteOutlined, LogoutOutlined } from \"@ant-design/icons\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getListProducts } from \"../api/product\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Home = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [devices, setDevices] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n\n  const handleDeleteBook = async () => {\n    try {\n      setDeleteLoading(true);\n      await deleteProduct(selectedItem.id);\n      notification.success({\n        message: /*#__PURE__*/_jsxDEV(Typography.Title, {\n          level: 5,\n          type: \"success\",\n          children: \"Success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this),\n        description: /*#__PURE__*/_jsxDEV(Alert, {\n          message: \"Device deleted successfully\",\n          type: \"success\",\n          style: {\n            border: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this),\n        duration: 5\n      });\n      setSelectedItem(null);\n      setDeleteLoading(false);\n      setLoading(false);\n    } catch (e) {\n      notification.error({\n        message: /*#__PURE__*/_jsxDEV(Typography.Title, {\n          level: 5,\n          type: \"success\",\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this),\n        description: /*#__PURE__*/_jsxDEV(Alert, {\n          message: \"Book deleted failed\",\n          type: \"success\",\n          style: {\n            border: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this),\n        duration: 5\n      });\n    } finally {}\n  };\n\n  const columns = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    key: \"name\"\n  }, {\n    title: \"Category\",\n    key: \"category\",\n    render: device => device === null || device === void 0 ? void 0 : device.category.name\n  }, {\n    title: \"Description\",\n    dataIndex: \"description\",\n    key: \"description\"\n  }, {\n    title: \"Image\",\n    key: \"image\",\n    render: device => {\n      return /*#__PURE__*/_jsxDEV(Image, {\n        src: device.image,\n        width: 200,\n        title: \"Preview\",\n        alt: \"preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    title: \"Price\",\n    key: \"price\",\n    render: device => `$${device.price}`\n  }, {\n    title: \"Stock\",\n    key: \"stock\",\n    dataIndex: \"stock\"\n  }, {\n    title: \"Sold Quantity\",\n    key: \"soldQuantity\",\n    dataIndex: \"soldQuantity\"\n  }, {\n    title: \"Action\",\n    key: \"action\",\n    render: device => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-evenly\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigate(`/edit-device/${device.id}`),\n          children: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"ghost\",\n          danger: true,\n          onClick: () => setSelectedItem(device),\n          children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this);\n    }\n  }];\n  useEffect(() => {\n    setLoading(true);\n    getListProducts().then(_ref => {\n      let {\n        data\n      } = _ref;\n      setDevices(data.products);\n    }).finally(() => setLoading(false)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n\n  const logout = () => {\n    localStorage.removeItem(\"isAuth\");\n    localStorage.removeItem(\"token\");\n    navigate(\"/login\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      pagination: {\n        defaultCurrent: 1,\n        pageSize: 5\n      },\n      dataSource: devices,\n      columns: columns,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), !!selectedItem && /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Delete book\",\n      visible: !!selectedItem,\n      onCancel: () => setSelectedItem(null),\n      footer: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          danger: true,\n          onClick: handleDeleteBook,\n          loading: deleteLoading,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setSelectedItem(null),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true),\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Do you want to delete this book ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      icon: /*#__PURE__*/_jsxDEV(LogoutOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this),\n      type: \"primary\",\n      style: {\n        position: \"fixed\",\n        right: \"1rem\",\n        bottom: \"1rem\"\n      },\n      onClick: logout,\n      danger: true,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Home, \"UKPGYIjxReORQW7k9YYIGN2apGo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["Table","Image","Button","Modal","Typography","notification","Alert","useEffect","useState","deleteProduct","EditOutlined","DeleteOutlined","LogoutOutlined","useNavigate","getListProducts","Home","navigate","devices","setDevices","loading","setLoading","selectedItem","setSelectedItem","deleteLoading","setDeleteLoading","handleDeleteBook","id","success","message","description","border","duration","e","error","columns","title","dataIndex","key","render","device","category","name","image","price","display","flexDirection","justifyContent","then","data","products","finally","logout","localStorage","removeItem","defaultCurrent","pageSize","position","right","bottom"],"sources":["D:/Canh Long/Documents/Nam4_Ky 2/Chuyên Đề Mạng/Web/device-management-admin-main/src/pages/Home.js"],"sourcesContent":["import {\n  Table,\n  Image,\n  Button,\n  Modal,\n  Typography,\n  notification,\n  Alert,\n} from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { deleteProduct } from \"../api/product\";\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  LogoutOutlined,\n} from \"@ant-design/icons\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getListProducts } from \"../api/product\";\n\nexport const Home = () => {\n  const navigate = useNavigate();\n  const [devices, setDevices] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n\n  const handleDeleteBook = async () => {\n    try {\n      setDeleteLoading(true);\n      await deleteProduct(selectedItem.id);\n      notification.success({\n        message: (\n          <Typography.Title level={5} type=\"success\">\n            Success\n          </Typography.Title>\n        ),\n        description: (\n          <Alert\n            message=\"Device deleted successfully\"\n            type=\"success\"\n            style={{ border: \"none\" }}\n          />\n        ),\n        duration: 5,\n      });\n      setSelectedItem(null);\n      setDeleteLoading(false);\n      setLoading(false);\n    } catch (e) {\n      notification.error({\n        message: (\n          <Typography.Title level={5} type=\"success\">\n            Error\n          </Typography.Title>\n        ),\n        description: (\n          <Alert\n            message=\"Book deleted failed\"\n            type=\"success\"\n            style={{ border: \"none\" }}\n          />\n        ),\n        duration: 5,\n      });\n    } finally {\n    }\n  };\n  const columns = [\n    {\n      title: \"Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n    },\n    {\n      title: \"Category\",\n      key: \"category\",\n      render: (device) => device?.category.name,\n    },\n    {\n      title: \"Description\",\n      dataIndex: \"description\",\n      key: \"description\",\n    },\n    {\n      title: \"Image\",\n      key: \"image\",\n      render: (device) => {\n        return (\n          <Image src={device.image} width={200} title=\"Preview\" alt=\"preview\" />\n        );\n      },\n    },\n    {\n      title: \"Price\",\n      key: \"price\",\n      render: (device) => `$${device.price}`,\n    },\n    {\n      title: \"Stock\",\n      key: \"stock\",\n      dataIndex: \"stock\",\n    },\n    {\n      title: \"Sold Quantity\",\n      key: \"soldQuantity\",\n      dataIndex: \"soldQuantity\",\n    },\n    {\n      title: \"Action\",\n      key: \"action\",\n      render: (device) => {\n        return (\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              justifyContent: \"space-evenly\",\n            }}\n          >\n            <Button onClick={() => navigate(`/edit-device/${device.id}`)}>\n              <EditOutlined />\n            </Button>\n            <Button type=\"ghost\" danger onClick={() => setSelectedItem(device)}>\n              <DeleteOutlined />\n            </Button>\n          </div>\n        );\n      },\n    },\n  ];\n  useEffect(() => {\n    setLoading(true);\n    getListProducts()\n      .then(({ data }) => {\n        setDevices(data.products);\n      })\n      .finally(() => setLoading(false));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n\n  const logout = () => {\n    localStorage.removeItem(\"isAuth\");\n    localStorage.removeItem(\"token\");\n    navigate(\"/login\");\n  };\n\n  return (\n    <>\n      <Table\n        pagination={{\n          defaultCurrent: 1,\n          pageSize: 5,\n        }}\n        dataSource={devices}\n        columns={columns}\n        loading={loading}\n      />\n      {!!selectedItem && (\n        <Modal\n          title=\"Delete book\"\n          visible={!!selectedItem}\n          onCancel={() => setSelectedItem(null)}\n          footer={\n            <>\n              <Button danger onClick={handleDeleteBook} loading={deleteLoading}>\n                Delete\n              </Button>\n              <Button onClick={() => setSelectedItem(null)}>Cancel</Button>\n            </>\n          }\n        >\n          <Typography>Do you want to delete this book ?</Typography>\n        </Modal>\n      )}\n      <Button\n        icon={<LogoutOutlined />}\n        type=\"primary\"\n        style={{ position: \"fixed\", right: \"1rem\", bottom: \"1rem\" }}\n        onClick={logout}\n        danger\n      >\n        Logout\n      </Button>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}